---
title: "Agencja nieruchomości"
author: "grupaA"
output: html_document
---

```{r, include = FALSE}
# instalacja (jeśli potrzeba) i załadowanie niezbędnych pakietów
if (!require(knitr)) install.packages("knitr")
library(knitr)
if (!require(tidyverse)) install.packages("tidyverse")
library(tidyverse)
if (!require(gridExtra)) install.packages("gridExtra")
library(gridExtra)
if (!require(psych)) install.packages("psych")
library(psych)
if (!require(MASS)) install.packages("MASS")
library(MASS)

# szerokość wydruku
options(width = 150)
```

# Wstęp
## Opis problemu
Przedmiotem rozważań niniejszego opracowania są ceny wybranych nieruchomości. Celem badania jest wyselekcjonowanie czynników mogących istotnie wpływać na cenę domu. Narzędziem mającym to umożliwić będzie **model regresji**.

## Baza danych
Podstawą analizy jest baza danych nieruchomości wystawionych na sprzedaż, dostępnych w pewnej agencji nieruchomości.

```{r}
# wczytanie danych
dane <- read.csv("agencja_nieruchomosci.csv")

# wyświetlenie pierwszych wierszy danych
kable(head(dane))
```

## Zmienne
Zmienną objaśnianą jest zmienna:

- **price** - cena nieruchomości w dolarach

Zmienne objaśniające to parametry techniczne danej nieruchomości:

- **area** - całkowita powierzchnia domu w stopach kwadratowych

- **bedrooms** - liczba sypialni w domu

- **bathrooms** - liczba łazienek w domu

- **stories** - liczba pięter w domu

- **mainroad** - czy dom jest połączony z główną drogą (Tak/Nie)

- **guestroom** - czy dom posiada pokój gościnny (Tak/Nie)

- **basement** - czy dom jest podpiwniczony (Tak/Nie)

- **hotwaterheating** - czy dom posiada system ogrzewania ciepłej wody (Tak/Nie)

- **airconditioning** - czy dom posiada system klimatyzacji (Tak/Nie)

- **parking** - liczba miejsc parkingowych dostępnych w budynku

- **prefarea** - czy dom znajduje się w preferowanym obszarze (Tak/Nie)

- **furnishingstatus** - status umeblowania domu (w pełni umeblowany, częściowo umeblowany, nieumeblowany)

```{r}
# wymiary bazy danych
dim(dane)
```

Mamy 545 obserwacji (nieruchomości) opisanych przez 13 zmiennych.
<<<<<<< HEAD

# Przygotowanie danych
Rozpoczynamy od sprawdzenia poprawności danych i dokowania ewentualnych poprawek. W pierwszym kroku sprawdzamy czy w bazie występują jakieś braki danych.

```{r}
# ilość braków danych dla poszczególnych zmiennych
data.frame(braki = sapply(dane, function(x) sum(is.na(x))))
```

Nie ma żadnych braków danych. Sprawdźmy dalej jaki jest zakres osiąganych wartości dla zmiennych ilościowych.

```{r}
# zakres osiąganych wartości dla zmiennych ilościowych
describe(dane[,c(1:5,11)])[8:9]
```

Jak widać ceny osiągają tu milionowe wartości. Aby nie operować bardzo dużymi liczbami wyrazimy je w mln dolarów. Podobnie powierzchnię wyrazimy w tysiącach stóp kwadratowych.

```{r}
# przeliczenia wartości zmiennych price i area
dane <- dane %>%
  mutate(price = price/10^6,
         area = area/10^3)
```

# Analiza eksploracyjna
Przystępujemy do analizy struktury poszczególnych zmiennych. Dla zmiennych jakościowych sporządzamy wykres słupkowy rozkładu procentowego, dla zmiennych ilościowych obliczamy podstawowe miary rozkładu i sporządzamy histogram.

## Price
Cena to zmienna ilościowa.

```{r}
# statystyki opisowe
kable(describe(dane[,1])[c(2:5,8,9,11,12)])
```

Średnia cena badanych nieruchomości to 4,77 mln dolarów, przy czym ceny poszczególnych domów różnią się od średniej przeciętnie o 1,87 mln dolarów. Dla połowy nieruchomości cena nie przekracza 4,34 mln dolarów. Najniższa zaobserwowana wartość to 1,75, a najwyższa aż 13,3 mln dolarów. W rozkładzie występuje skrajna asymetria prawostronna, jest on też wyższy i smuklejszy od rozkładu normalnego.

```{r, warning = FALSE}
# histogram
ggplot(dane, aes(x = price)) + 
  geom_histogram(colour = "black", fill = "#FFFF99", bins = 10) +
  labs(title = "Price", 
       x = " million dollars", y = "n") +
  theme(plot.title = element_text(hjust = 0.5, size = 12))
```

W rozkładzie dobrze widoczna jest asymetria prawostronna (wydłużona ramię z prawej strony).

Aby nie tworzyć oddzielnej tabeli i wykresu dla każdej zmiennej objaśniającej rozpatrzymy je wspólnie.
mm
=======
>>>>>>> 7a14405db7fa9d120d7e8cc849d059b5897512ee
